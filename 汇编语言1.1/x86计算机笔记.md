# x86计算机笔记

处理器在振荡器脉冲下，从内存读取指令，并发起一系列由该指令所定义的操作，当这些操作结束后，它接着再取下一条指令。这个过程通常是连续不断，循环往复的。

在处理器四周或底部由大量引脚，用于接收外部电信号，或向外发出电信号。这些电信号是一排高低电平的组合，代表二进制数中的每一位。

寄存器的一端接收输入并锁存，同时在另一端产生一模一样的输出。

处理器内部的控制单元在指令的执行过程中，负责给各个部件发生控制信号，使各个部件在某个正确的时间点上执行某个动作。同时它还决定在某个时间点上哪个部件有权使用总线，以免彼此发生冲突。

内存按字节组织，单次访问的最小单位为1字节，被称为存储单元。每个存储单元都对应一个地址。为访问内存，处理器需要给出一个地址。

指令用于程序员指示处理器所进行的操作，这些指令就是一些二值。指令集中存放在内存中，一条接着一条，处理器就负责自动按序取出并加以执行。

指令包括操作码和操作数，操作码中就隐含了指令的长度，使得处理器可以知道下一条指令的地址。

立即数就是不需要访存获得的数据，在指令中直接给出。

指令和非指令的二进制数是一模一样的，在组成内存的电路中，都是一些高低电平的组合。因为处理器是自动按序取值执行的，在指令中混杂了非指令的数据会导致处理器不能正常工作。为此，指令和数据要分开存放，分别位于不同内存中的不同区域，形成各自的段，存放指令的区域叫代码段，存放数据的区域叫数据段。

段的划分是逻辑上的，并没有实际改变内存的物理性质，它本质上就是一种我们组织内存中数据的一种方式。段可以在内存的任何位置开始。

想要访问某个内存的存储单元，就要给出该存储单元的真实地址，这称为物理地址。

程序在内存中的加载位置是不能确定的，通常在哪里有空闲区域，程序段就会被放到哪里。因此如果我们在程序的指令中直接使用物理地址，而程序的加载地址又不在我们预想中的位置，那么处理器执行指令就会出错。所以为了让程序可以在内存的任何位置都可以使用，就应该使用相对地址或逻辑地址。当程序加载时，这些逻辑地址还要根据程序的实际加载位置重新计算（重定位）。

采用内存分段机制后，，一个存储单元的地址就可以用"段地址:偏移地址"来表示，即逻辑地址。处理器有CS寄存器和IP寄存器，CS寄存器指出段地址，偏移地址由IP寄存器指出，或直接由指令指出。

修改CS寄存器就可以让处理器从新的代码段开始执行。

为了访存，还需要将逻辑地址转换为物理地址，通常段地址左移4位后加上偏移地址就是物理地址，这个过程由总线接口完成。

处理器内部有一个6字节的指令预取队列，用于在处理器执行非访存指令时，从内存提前预取指令，从而加快执行速度。

程序启动后，根据时钟信号，控制器会从内存中读取指令和数据。通过对这些指令加以解释和运行，运算器就会对数据进行运算，控制器根据该运算结果来控制计算机。其实所谓的控制就是指数据以外的处理，主要是数据输入输出的时机控制。